<!--
@author Gagandeep Singh
@email singh.gagandeep3911@gmail.com
@create date 2020-03-25 11:56:30
@modify date 2020-03-25 13:35:46
@desc GUI form to add a new user
-->

<div class="container">
<form [formGroup]="userRegisterationForm" (ngSubmit)="onSubmit()">
    <!-- username  -->
    <div class="form-group">
      <label for="uname">Username</label>
      <input
      formControlName="username"
      id="uname"
      class="form-control"
      [ngClass]="{'is-invalid': submitted && userRegisterationForm.get('username').invalid}"
      type="text"
      name="uname"
      placeholder="Enter Username">
      <div class="invalid-feedback" *ngIf="submitted && userRegisterationForm.get('username').invalid">
        <div *ngIf="userRegisterationForm.get('username').errors['required']">* Required</div>
      </div>
    </div>
    <!-- user type  -->
      <div class="form-group">
        <label for="utype">Select User Type</label>
        <select
        name="utype"
        id="utype"
        (change)="typeIsSelected($event)"
        formControlName="userType"
        [ngClass]="{'is-invalid': submitted && userRegisterationForm.get('userType').invalid}"
        class="custom-select">
            <option *ngFor="let user of userTypes | keyvalue" [value]="user.key"> {{user.value}} </option>
        </select>
        <div class="invalid-feedback" *ngIf="submitted && userRegisterationForm.get('userType').invalid">Select a Type</div>
    </div>
    <!-- password  -->
    <div class="form-group">
      <label for="password">Password</label>
      <input
      formControlName="password"
      id="password"
      class="form-control"
      [ngClass]="{'is-invalid': submitted && userRegisterationForm.get('password').invalid}"
      type="password"
      name="password"
      placeholder="Enter Password">
      <div class="invalid-feedback" *ngIf="submitted && userRegisterationForm.get('password').invalid">
        <div *ngIf="userRegisterationForm.get('password').errors['required']">* Required</div>
        <div *ngIf="userRegisterationForm.get('password').errors['pattern']">* Required</div>
      </div>
    </div>
    <!-- confirm password  -->
    <div class="form-group">
      <label for="cpassword">Confirm Username</label>
      <input
      formControlName="confirmPassword"
      id="cpassword"
      class="form-control"
      [ngClass]="{'is-invalid': submitted && userRegisterationForm.get('confirmPassword').invalid}"
      type="password"
      name="cpassword"
      placeholder="Re-enter Password">
      <div class="invalid-feedback" *ngIf="submitted && userRegisterationForm.get('confirmPassword').invalid">
        <div *ngIf="userRegisterationForm.get('confirmPassword').errors['required']">* Required</div>
        <div *ngIf="userRegisterationForm.get('confirmPassword').errors['pattern']">* Required</div>
        <div *ngIf="userRegisterationForm.get('confirmPassword').errors['passwordMatchError']">Passwords are not same</div>
      </div>
    </div>


    <button type="submit" class="btn btn-primary">{{ buttonStyle === 'Admin' ? 'Submit' : 'Next' }}</button>
</form>

<pre>
  {{ userRegisterationForm.value | json }}
</pre>
</div>
